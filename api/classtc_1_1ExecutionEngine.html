<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Tensor Comprehensions: tc::ExecutionEngine Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="tc-logo-small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tensor Comprehensions
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classtc_1_1ExecutionEngine.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classtc_1_1ExecutionEngine-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">tc::ExecutionEngine Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="execution__engine_8h_source.html">execution_engine.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for tc::ExecutionEngine:</div>
<div class="dyncontent">
<div class="center"><img src="classtc_1_1ExecutionEngine__coll__graph.png" border="0" usemap="#tc_1_1ExecutionEngine_coll__map" alt="Collaboration graph"/></div>
<map name="tc_1_1ExecutionEngine_coll__map" id="tc_1_1ExecutionEngine_coll__map">
<area shape="rect" id="node4" href="structtc_1_1ExecutionEngine_1_1ExecutorInfo.html" title="tc::ExecutionEngine\l::ExecutorInfo" alt="" coords="1597,486,1736,527"/><area shape="rect" id="node6" href="classtc_1_1MappingOptions.html" title="tc::MappingOptions" alt="" coords="377,67,511,93"/><area shape="rect" id="node7" href="classtc_1_1CudaDimView.html" title="tc::CudaDimView" alt="" coords="29,148,155,175"/><area shape="rect" id="node23" href="classtc_1_1CudaDim.html" title="tc::CudaDim" alt="" coords="396,168,492,195"/><area shape="rect" id="node8" href="classtc_1_1SchedulerOptionsView.html" title="tc::SchedulerOptionsView" alt="" coords="5,15,179,41"/><area shape="rect" id="node9" href="classtc_1_1TilingView.html" title="tc::TilingView" alt="" coords="41,65,143,92"/><area shape="rect" id="node10" title="STL class. " alt="" coords="404,511,484,537"/><area shape="rect" id="node20" href="structtc_1_1TcExecutor_1_1TcExecutionInfo.html" title="tc::TcExecutor::TcExecutionInfo" alt="" coords="1000,304,1211,331"/><area shape="rect" id="node11" title="STL class. " alt="" coords="29,503,155,545"/><area shape="rect" id="node13" title="STL class. " alt="" coords="374,227,514,253"/><area shape="rect" id="node15" href="classtc_1_1TcExecutor.html" title="tc::TcExecutor" alt="" coords="1406,544,1514,571"/><area shape="rect" id="node16" href="structtc2halide_1_1HalideComponents.html" title="tc2halide::HalideComponents" alt="" coords="1009,585,1202,612"/><area shape="rect" id="node22" href="classtc_1_1Grid.html" title="Specializing CudaDim to differentiate between Block and Grid sizes. " alt="" coords="686,117,751,144"/><area shape="rect" id="node25" href="classtc_1_1Block.html" title="Specializing CudaDim to differentiate between Block and Grid sizes. " alt="" coords="681,168,756,195"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtc_1_1ExecutionEngine_1_1ExecutorInfo.html">ExecutorInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a265570a253c972f3f1687ea175027804"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtc_1_1ExecutionEngine.html#a265570a253c972f3f1687ea175027804">ExecutionEngine</a> ()=default</td></tr>
<tr class="separator:a265570a253c972f3f1687ea175027804"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ad356e64b677c2615dc4b4bf0ecfefb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtc_1_1ExecutionEngine.html#a8ad356e64b677c2615dc4b4bf0ecfefb">define</a> (const std::string &amp;language)</td></tr>
<tr class="separator:a8ad356e64b677c2615dc4b4bf0ecfefb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61a68a34ac888ed773f8666c6b5fa0c5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtc_1_1ExecutionEngine.html#a61a68a34ac888ed773f8666c6b5fa0c5">define</a> (const std::vector&lt; <a class="el" href="namespacelang.html#ac8e4d14b1d3cc054c71be13072519d2a">lang::TreeRef</a> &gt; &amp;treeRefs)</td></tr>
<tr class="separator:a61a68a34ac888ed773f8666c6b5fa0c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74a3de8b31384aa9bb27bfa84de36f2e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtc_1_1ExecutionEngine.html#a74a3de8b31384aa9bb27bfa84de36f2e">addTC</a> (const std::string &amp;tc)</td></tr>
<tr class="separator:a74a3de8b31384aa9bb27bfa84de36f2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ad55622526fb35bf2c19b8453e16cf9"><td class="memItemLeft" align="right" valign="top">std::vector&lt; const DLTensor * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtc_1_1ExecutionEngine.html#a8ad55622526fb35bf2c19b8453e16cf9">inferOutputTensorInfo</a> (const std::string &amp;name, const std::vector&lt; const DLTensor * &gt; &amp;inTensorPtrs)</td></tr>
<tr class="separator:a8ad55622526fb35bf2c19b8453e16cf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49784d2e09812800d703e660f7233369"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacelang.html#ac8e4d14b1d3cc054c71be13072519d2a">lang::TreeRef</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtc_1_1ExecutionEngine.html#a49784d2e09812800d703e660f7233369">treeForFunction</a> (const std::string &amp;name)</td></tr>
<tr class="separator:a49784d2e09812800d703e660f7233369"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0fe67797b151b5df640c96d9493bd0a"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtc_1_1ExecutionEngine.html#ab0fe67797b151b5df640c96d9493bd0a">compile</a> (const std::string &amp;name, const std::vector&lt; const DLTensor * &gt; &amp;inputs, const <a class="el" href="classtc_1_1MappingOptions.html">MappingOptions</a> &amp;options)</td></tr>
<tr class="memdesc:ab0fe67797b151b5df640c96d9493bd0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a handle for the compiled kernel.  <a href="#ab0fe67797b151b5df640c96d9493bd0a">More...</a><br/></td></tr>
<tr class="separator:ab0fe67797b151b5df640c96d9493bd0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6e954b89ed073cdbf8903fb2b0d95bd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacetc.html#a4bfc10cdfff4f176b490a2c49fc7ed07">Duration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtc_1_1ExecutionEngine.html#ad6e954b89ed073cdbf8903fb2b0d95bd">run</a> (size_t handle, const std::vector&lt; const DLTensor * &gt; &amp;inputs, const std::vector&lt; DLTensor * &gt; &amp;outputs, bool profile=false, std::function&lt; bool(const <a class="el" href="structtc_1_1ExecutionEngine_1_1ExecutorInfo.html">ExecutorInfo</a> *)&gt; pruningFunction=[](const <a class="el" href="structtc_1_1ExecutionEngine_1_1ExecutorInfo.html">ExecutorInfo</a> *){return false;})</td></tr>
<tr class="separator:ad6e954b89ed073cdbf8903fb2b0d95bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02ca888718cb4b50e7bf8e149a25321f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtc_1_1ExecutionEngine.html#a02ca888718cb4b50e7bf8e149a25321f">uncheckedRun</a> (size_t handle, const std::vector&lt; const void * &gt; &amp;inputs, const std::vector&lt; void * &gt; &amp;outputs)</td></tr>
<tr class="separator:a02ca888718cb4b50e7bf8e149a25321f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f22e0aeb548133bc507dc28c2f6ca41"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtc_1_1ExecutionEngine.html#a5f22e0aeb548133bc507dc28c2f6ca41">clear</a> (size_t handle)</td></tr>
<tr class="separator:a5f22e0aeb548133bc507dc28c2f6ca41"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a9b5020a8068219289042f3c624bb4da0"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtc_1_1ExecutionEngine.html#a9b5020a8068219289042f3c624bb4da0">getHandle</a> (const std::string &amp;name, const std::vector&lt; const DLTensor * &gt; &amp;inputsInfo, const <a class="el" href="classtc_1_1MappingOptions.html">MappingOptions</a> &amp;options)</td></tr>
<tr class="separator:a9b5020a8068219289042f3c624bb4da0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accc98ad7db00fb2b08d059a876fbb4a3"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="structtc_1_1ExecutionEngine_1_1ExecutorInfo.html">ExecutorInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtc_1_1ExecutionEngine.html#accc98ad7db00fb2b08d059a876fbb4a3">makeExecutorInfo</a> (const std::string &amp;name, const std::vector&lt; const DLTensor * &gt; &amp;inputsInfo, const <a class="el" href="classtc_1_1MappingOptions.html">MappingOptions</a> &amp;options)</td></tr>
<tr class="separator:accc98ad7db00fb2b08d059a876fbb4a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0e43cd373d9f081266dba45aca7d804"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtc_1_1ExecutionEngine.html#aa0e43cd373d9f081266dba45aca7d804">emplaceExecutor</a> (std::unique_ptr&lt; <a class="el" href="structtc_1_1ExecutionEngine_1_1ExecutorInfo.html">ExecutorInfo</a> &gt; p)</td></tr>
<tr class="separator:aa0e43cd373d9f081266dba45aca7d804"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a79e247a9a2190cda85c06cdb18a143eb"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtc_1_1ExecutionEngine.html#a79e247a9a2190cda85c06cdb18a143eb">executorInfoMutex</a></td></tr>
<tr class="memdesc:a79e247a9a2190cda85c06cdb18a143eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">For thread-safety perform all cheap operations under lock.  <a href="#a79e247a9a2190cda85c06cdb18a143eb">More...</a><br/></td></tr>
<tr class="separator:a79e247a9a2190cda85c06cdb18a143eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ce79b67c395e97153d040278e11f2f9"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::unique_ptr<br class="typebreak"/>
&lt; <a class="el" href="structtc_1_1ExecutionEngine_1_1ExecutorInfo.html">ExecutorInfo</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtc_1_1ExecutionEngine.html#a9ce79b67c395e97153d040278e11f2f9">executors_</a></td></tr>
<tr class="separator:a9ce79b67c395e97153d040278e11f2f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab46281f7e4906af9431307122311ab15"><td class="memItemLeft" align="right" valign="top">std::map&lt; std::string, <br class="typebreak"/>
<a class="el" href="namespacelang.html#ac8e4d14b1d3cc054c71be13072519d2a">lang::TreeRef</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtc_1_1ExecutionEngine.html#ab46281f7e4906af9431307122311ab15">tcNameMap_</a></td></tr>
<tr class="separator:ab46281f7e4906af9431307122311ab15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a779ec1b27edb97151229d0c0ab2e1535"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtc_1_1ExecutionEngine.html#a779ec1b27edb97151229d0c0ab2e1535">uidCounter</a> = 0</td></tr>
<tr class="separator:a779ec1b27edb97151229d0c0ab2e1535"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The goal for this new shiny API is to provide a different pathway for being able to execute the kernels for multiple TC i.e. given the language which can have multiple TCs, people should be able to run things by just calling out the run function with the name of function and the inputs to run on. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a265570a253c972f3f1687ea175027804"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">tc::ExecutionEngine::ExecutionEngine </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a74a3de8b31384aa9bb27bfa84de36f2e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tc::ExecutionEngine::addTC </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>tc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a5f22e0aeb548133bc507dc28c2f6ca41"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tc::ExecutionEngine::clear </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab0fe67797b151b5df640c96d9493bd0a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t tc::ExecutionEngine::compile </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; const DLTensor * &gt; &amp;&#160;</td>
          <td class="paramname"><em>inputs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtc_1_1MappingOptions.html">MappingOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a handle for the compiled kernel. </p>

</div>
</div>
<a class="anchor" id="a8ad356e64b677c2615dc4b4bf0ecfefb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tc::ExecutionEngine::define </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>language</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create the <a class="el" href="classtc_1_1ExecutionEngine.html#ab46281f7e4906af9431307122311ab15">ExecutionEngine::tcNameMap_</a> using the language passed to it - should support many TC. </p>

</div>
</div>
<a class="anchor" id="a61a68a34ac888ed773f8666c6b5fa0c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tc::ExecutionEngine::define </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="namespacelang.html#ac8e4d14b1d3cc054c71be13072519d2a">lang::TreeRef</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>treeRefs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create the <a class="el" href="classtc_1_1ExecutionEngine.html#ab46281f7e4906af9431307122311ab15">ExecutionEngine::tcNameMap_</a> from the parsed TC string - supports many TC. </p>

</div>
</div>
<a class="anchor" id="aa0e43cd373d9f081266dba45aca7d804"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t tc::ExecutionEngine::emplaceExecutor </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="structtc_1_1ExecutionEngine_1_1ExecutorInfo.html">ExecutorInfo</a> &gt;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9b5020a8068219289042f3c624bb4da0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t tc::ExecutionEngine::getHandle </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; const DLTensor * &gt; &amp;&#160;</td>
          <td class="paramname"><em>inputsInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtc_1_1MappingOptions.html">MappingOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a8ad55622526fb35bf2c19b8453e16cf9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;const DLTensor*&gt; tc::ExecutionEngine::inferOutputTensorInfo </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; const DLTensor * &gt; &amp;&#160;</td>
          <td class="paramname"><em>inTensorPtrs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the output Tensor info that can be used by the calling framework to allocate storage for the output. </p>

</div>
</div>
<a class="anchor" id="accc98ad7db00fb2b08d059a876fbb4a3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="structtc_1_1ExecutionEngine_1_1ExecutorInfo.html">ExecutorInfo</a>&gt; tc::ExecutionEngine::makeExecutorInfo </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; const DLTensor * &gt; &amp;&#160;</td>
          <td class="paramname"><em>inputsInfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtc_1_1MappingOptions.html">MappingOptions</a> &amp;&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ad6e954b89ed073cdbf8903fb2b0d95bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacetc.html#a4bfc10cdfff4f176b490a2c49fc7ed07">Duration</a> tc::ExecutionEngine::run </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; const DLTensor * &gt; &amp;&#160;</td>
          <td class="paramname"><em>inputs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; DLTensor * &gt; &amp;&#160;</td>
          <td class="paramname"><em>outputs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>profile</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; bool(const <a class="el" href="structtc_1_1ExecutionEngine_1_1ExecutorInfo.html">ExecutorInfo</a> *)&gt;&#160;</td>
          <td class="paramname"><em>pruningFunction</em> = <code>[](const&#160;<a class="el" href="structtc_1_1ExecutionEngine_1_1ExecutorInfo.html">ExecutorInfo</a>&#160;*){return&#160;false;}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Run a TC specified by its name on the given tensor inputs and fill the outputs with the result. The TC is looked up by its handle. If profile is set, the kernel runtime is returned.</p>
<p>The pruning function returns true if the run should not proceed (e.g. if there are too few threads mapped that would likely result in catastrophic performance). In this case, return Duration::max(). </p>

</div>
</div>
<a class="anchor" id="a49784d2e09812800d703e660f7233369"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacelang.html#ac8e4d14b1d3cc054c71be13072519d2a">lang::TreeRef</a> tc::ExecutionEngine::treeForFunction </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a02ca888718cb4b50e7bf8e149a25321f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tc::ExecutionEngine::uncheckedRun </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; const void * &gt; &amp;&#160;</td>
          <td class="paramname"><em>inputs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; void * &gt; &amp;&#160;</td>
          <td class="paramname"><em>outputs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is the "low-latency" mode in which we just propagate raw pointers to data in GPU address space. No tensor-related information can be checked so it is the user's responsibility to ensure that shapes and strides match. If the user doesn't then segfault will likely occur. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a79e247a9a2190cda85c06cdb18a143eb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex tc::ExecutionEngine::executorInfoMutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For thread-safety perform all cheap operations under lock. </p>

</div>
</div>
<a class="anchor" id="a9ce79b67c395e97153d040278e11f2f9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::unique_ptr&lt;<a class="el" href="structtc_1_1ExecutionEngine_1_1ExecutorInfo.html">ExecutorInfo</a>&gt; &gt; tc::ExecutionEngine::executors_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab46281f7e4906af9431307122311ab15"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;std::string, <a class="el" href="namespacelang.html#ac8e4d14b1d3cc054c71be13072519d2a">lang::TreeRef</a>&gt; tc::ExecutionEngine::tcNameMap_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a779ec1b27edb97151229d0c0ab2e1535"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t tc::ExecutionEngine::uidCounter = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/tc/core/<a class="el" href="execution__engine_8h_source.html">execution_engine.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacetc.html">tc</a></li><li class="navelem"><a class="el" href="classtc_1_1ExecutionEngine.html">ExecutionEngine</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
